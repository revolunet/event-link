<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Event Link - Calendar Event Generator</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <main class="container">
    <header>
      <h1>Event Link</h1>
      <p>Create shareable calendar event links</p>
    </header>

    <form id="event-form" novalidate>
      <div class="form-group">
        <label for="title">Event Title <span class="required">*</span></label>
        <input type="text" id="title" name="title" required placeholder="Enter event title" aria-required="true">
        <div id="title-error" class="error-message" aria-live="polite"></div>
      </div>

      <div class="form-group">
        <label for="start-datetime">Start Date & Time <span class="required">*</span></label>
        <input type="datetime-local" id="start-datetime" name="startDateTime" required aria-required="true">
        <div id="start-datetime-error" class="error-message" aria-live="polite"></div>
        <div id="start-datetime-warning" class="warning-message" aria-live="polite"></div>
      </div>

      <div class="form-group">
        <label for="end-datetime">End Date & Time <span class="required">*</span></label>
        <input type="datetime-local" id="end-datetime" name="endDateTime" required aria-required="true">
        <div id="end-datetime-error" class="error-message" aria-live="polite"></div>
      </div>

      <div class="form-group">
        <label for="description">Description</label>
        <textarea id="description" name="description" placeholder="Event description (optional)" rows="3"></textarea>
      </div>

      <div class="form-group">
        <label for="url">URL</label>
        <input type="url" id="url" name="url" placeholder="https://example.com (optional)">
      </div>
    </form>

    <!-- Event Summary (for buttons-only share view) -->
    <section id="event-summary" class="event-summary hidden">
      <h2 id="event-title"></h2>
      <p id="event-datetime" class="event-datetime"></p>
      <p id="event-description" class="event-description"></p>
    </section>

    <!-- Share Error (for invalid share URLs) -->
    <section id="share-error" class="share-error hidden">
      <h2>Invalid Event Link</h2>
      <p id="error-message"></p>
      <a href="./" class="create-event-link">Create a new event</a>
    </section>

    <section id="calendar-links" class="calendar-links hidden">
      <h2>Add to Calendar</h2>
      <div class="calendar-buttons">
        <div class="calendar-button-group">
          <a id="google-button" class="calendar-button" href="#" target="_blank" rel="noopener" data-calendar="google">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
            </svg>
            Google Calendar
          </a>
          <button type="button" id="google-copy" class="copy-button" title="Copy link" aria-label="Copy Google Calendar link">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </button>
        </div>

        <div class="calendar-button-group">
          <a id="outlook-button" class="calendar-button" href="#" target="_blank" rel="noopener" data-calendar="outlook">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M7.88 12.04q0 .45-.11.87-.11.41-.36.74-.25.33-.64.52-.38.18-.94.18-.52 0-.92-.17-.4-.17-.68-.49-.28-.32-.42-.77-.14-.46-.14-1.04 0-.47.12-.89.12-.42.36-.74.25-.32.64-.5.4-.18.95-.18.52 0 .91.17.4.18.68.5.29.32.43.77.14.45.14 1.03zM12 0C5.37 0 0 5.37 0 12s5.37 12 12 12 12-5.37 12-12S18.63 0 12 0zM3.14 8.17H1v8.17h1.71v-3.13q.14.31.4.55.26.25.56.41.3.17.63.26.33.08.67.08.64 0 1.17-.21.54-.21.92-.58.38-.38.58-.9.21-.53.21-1.17 0-.6-.18-1.12-.18-.52-.53-.91-.35-.38-.86-.6-.5-.22-1.13-.22-.36 0-.73.11-.36.1-.66.32l-.04-.35H3.14v.04q.01.08.01.17v3.3H3.14v-4.32zm5.03 5.75L6.86 8.17h1.93l.92 4.32.95-4.32h1.92l-1.34 5.75h-2.07zm4.55-5.75h1.71v3.13q.14-.31.4-.55.26-.25.56-.41.3-.17.63-.26.33-.08.67-.08.64 0 1.17.21.54.21.92.58.38.38.58.9.21.53.21 1.17 0 .6-.18 1.12-.18.52-.53.91-.35.38-.86.6-.5.22-1.13.22-.36 0-.73-.11-.36-.1-.66-.32l.04.35h-1.8v-.04q-.01-.08-.01-.17v-3.3h.01v4.32z"/>
            </svg>
            Outlook
          </a>
          <button type="button" id="outlook-copy" class="copy-button" title="Copy link" aria-label="Copy Outlook Calendar link">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </button>
        </div>

        <div class="calendar-button-group">
          <a id="ical-button" class="calendar-button" href="#" download="event.ics" data-calendar="ical">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11zM9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/>
            </svg>
            iCal (.ics)
          </a>
          <button type="button" id="ical-copy" class="copy-button" title="Copy link" aria-label="Copy iCal file link">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </button>
        </div>
      </div>
    </section>

    <!-- Share Section (below calendar buttons) -->
    <section id="share-section" class="share-section hidden">
      <button id="share-button" class="share-button" type="button" aria-label="Share event">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <circle cx="18" cy="5" r="3"></circle>
          <circle cx="6" cy="12" r="3"></circle>
          <circle cx="18" cy="19" r="3"></circle>
          <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
          <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
        </svg>
        Share Event
      </button>
      <div id="share-url-display" class="share-url-display hidden">
        <input id="share-url-input" type="text" readonly aria-label="Share URL">
        <button id="share-url-copy" class="copy-button" type="button" title="Copy share URL" aria-label="Copy share URL">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
          </svg>
        </button>
      </div>
    </section>

    <!-- Create Your Own Event (footer link for share view) -->
    <footer id="share-footer" class="share-footer hidden">
      <a href="./" class="create-event-link">Create your own event</a>
    </footer>
  </main>

  <script type="module" src="./main.ts"></script>
</body>
</html>
